version: "2"

# http://docs.grafana.org/installation/docker/
services:
  grafana:
    image: grafana/grafana-oss #grafana/grafana-oss? and fix version
    environment:
      GF_SERVER_DOMAIN: ${GRAPHANA_DOMAIN}
      CUSTOM_SECURITY_ADMIN_USERNAME: "admin"
      GF_SECURITY_ADMIN_PASSWORD: ${ADMIN_PASSWORD}
      CUSTOM_INFLUXDB_ORG: ${INFLUX_ORG}
      CUSTOM_INFLUXDB_TOKEN: ${INFLUX_TOKEN}
      CUSTOM_INFLUXDB_BUCKET: ${INFLUX_BUCKET}
      GF_DASHBOARDS_JSON_ENABLED: "true"
      GF_DASHBOARDS_JSON_PATH: /var/lib/grafana/dashboards
      GF_INSTALL_PLUGINS: grafana-clock-panel,grafana-simple-json-datasource,grafana-worldmap-panel,grafana-piechart-panel,mtanda-heatmap-epoch-panel,briangann-gauge-panel,jdbranham-diagram-panel,snuids-radar-panel,fatcloud-windrose-panel,snuids-trafficlights-panel,larona-epict-panel,grafana-polystat-panel,natel-plotly-panel,bessler-pictureit-panel,pierosavi-imageit-panel,agenty-flowcharting-panel,abhisant-druid-datasource,https://github.com/gapitio/gapit-htmlgraphics-panel/releases/download/v2.0.2/gapit-htmlgraphics-panel-2.0.2.zip;gapit-htmlgraphics-panel,https://github.com/cloudspout/cloudspout-button-panel/releases/download/7.0.23/cloudspout-button-panel.zip;cloudspout-button-panel
    volumes:
      # - ./configuration/grafana/grafana.ini:/etc/grafana/grafana.ini #plus besoin normalement
       - ./configuration/grafana/dashboards/:/var/lib/grafana/dashboards/
       - ./configuration/grafana/dashboards.yaml:/etc/grafana/provisioning/dashboards/dashboards.yaml
       - ./configuration/grafana/datasources/:/etc/grafana/provisioning/datasources/
      #  - ./configuration/grafana/logo.svg:/usr/share/grafana/public/img/grafana_icon.svg #changer le logo ou mettre celui du lobo
    # ports:
    #   - 3000:3000
    restart: unless-stopped
